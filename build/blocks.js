(()=>{"use strict";const e=window.wp.plugins,r=window.wp.data,t=window.wp.i18n,o=window.wp.editPost,s=window.wp.components,n=window.wp.blockEditor,a=window.wp.blocks,i=JSON.parse('{"$schema":"https://json.schemastore.org/block.json","apiVersion":2,"name":"pressforward/bookmarklet-code","title":"Nominate This Bookmarklet","category":"pressforward","icon":"controls-forward","description":"Display the code used to create the Nominate This bookmarklet.","textdomain":"pressforward","supports":{"anchor":true,"html":false}}'),l=window.ReactJSXRuntime;(0,a.registerBlockType)(i,{edit:()=>(0,l.jsx)("div",{...(0,n.useBlockProps)(),children:(0,l.jsxs)("div",{className:"nominate-this-bookmarklet-code",children:[(0,l.jsx)("span",{className:"nominate-this-bookmarklet",children:(0,l.jsx)("span",{children:(0,t.__)("Nominate This","pressforward")})}),(0,l.jsxs)("button",{className:"nominate-this-js-toggle",children:[(0,l.jsx)("span",{className:"dashicons dashicons-clipboard"}),(0,l.jsx)("span",{className:"screen-reader-text",children:(0,t.__)("Show code","pressforward")})]})]})})});const c=JSON.parse('{"$schema":"https://json.schemastore.org/block.json","apiVersion":2,"name":"pressforward/item-credits","title":"Credits","category":"pressforward","icon":"controls-forward","description":"Display credits for the current item.","textdomain":"pressforward","supports":{"align":true,"anchor":true,"color":{"background":true,"text":true},"html":false,"spacing":{"padding":true,"margin":true},"typography":{"fontSize":true}},"attributes":{"backgroundColor":{"type":"string","default":"#f5f5f5"},"fontSize":{"type":"string","default":"0.9em"},"prefixAuthorName":{"type":"string","default":"Author: "},"prefixSourceLink":{"type":"string","default":"Source: "},"showAuthorName":{"type":"boolean","default":true},"showSourceLink":{"type":"boolean","default":true},"style":{"type":"object","default":{"color":{"background":"#f5f5f5"},"typography":{"fontSize":"0.9em"},"spacing":{"padding":{"left":"1em","right":"1em"}}}}},"styles":[{"name":"inline","label":"Inline","isDefault":true},{"name":"stacked","label":"Stacked"}]}');(0,a.registerBlockType)(c,{edit:({attributes:e,setAttributes:o})=>{const{backgroundColor:a,prefixAuthorName:i,prefixSourceLink:c,showAuthorName:d,showSourceLink:p}=e,{authorName:u,sourceLink:m}=(0,r.useSelect)((e=>{const r=e("core/editor").getEditedPostAttribute("meta");return{authorName:r?.item_author||"",sourceLink:r?.item_link||""}})),h=(0,n.useBlockProps)({style:{backgroundColor:a}});return(0,l.jsxs)("div",{...h,children:[d&&(0,l.jsxs)("div",{className:"pf-credits-line",children:[(0,l.jsx)(n.RichText,{className:"pf-credits-prefix",tagName:"p",value:i,onChange:e=>o({prefixAuthorName:e}),placeholder:(0,t.__)("Author: ","pressforward")}),(0,l.jsx)("p",{className:"pf-credits-author-name",children:u})]}),p&&(0,l.jsxs)("div",{className:"pf-credits-line",children:[(0,l.jsx)(n.RichText,{className:"pf-credits-prefix",tagName:"p",value:c,onChange:e=>o({prefixSourceLink:e}),placeholder:(0,t.__)("Source: ","pressforward")}),(0,l.jsx)("p",{className:"pf-credits-source-link",children:(0,l.jsx)("a",{href:m,children:m})})]}),(0,l.jsx)(n.InspectorControls,{children:(0,l.jsx)(s.Panel,{title:(0,t.__)("PressForward Credits","pressforward"),children:(0,l.jsxs)(s.PanelBody,{title:(0,t.__)("Settings","pressforward"),children:[(0,l.jsx)(s.PanelRow,{children:(0,l.jsx)(s.ToggleControl,{label:(0,t.__)("Show Author Name","pressforward"),checked:d,onChange:()=>o({showAuthorName:!d})})}),(0,l.jsx)(s.PanelRow,{children:(0,l.jsx)(s.ToggleControl,{label:(0,t.__)("Show Source Link","pressforward"),checked:p,onChange:()=>o({showSourceLink:!p})})})]})})})]})}});const d=JSON.parse('{"$schema":"https://json.schemastore.org/block.json","apiVersion":2,"name":"pressforward/item-nominators","title":"Nominators","category":"pressforward","icon":"controls-forward","description":"Display a list of users who have nominated the current item.","textdomain":"pressforward","supports":{"align":true,"anchor":true,"color":{"background":true,"text":true},"html":false,"spacing":{"padding":true,"margin":true},"typography":{"fontSize":true}},"attributes":{"backgroundColor":{"type":"string","default":"#f5f5f5"},"fontSize":{"type":"string","default":"0.9em"},"prefix":{"type":"string","default":"Nominated by: "},"style":{"type":"object","default":{"color":{"background":"#f5f5f5"},"typography":{"fontSize":"0.9em"},"spacing":{"padding":{"left":"1em","right":"1em"}}}}},"styles":[{"name":"inline","label":"Inline","isDefault":true},{"name":"stacked","label":"Stacked"}]}');(0,a.registerBlockType)(d,{edit:({attributes:e,setAttributes:o})=>{const{backgroundColor:s,prefix:a}=e,{nominators:i}=(0,r.useSelect)((e=>{const r=e("core/editor").getCurrentPost(),t=r.nominators?r.nominators:{},o=[];for(const r in t){const s=e("core").getEntityRecord("root","user",t[r].user_id);o.push(s)}return{nominators:o}})),c=(0,n.useBlockProps)({style:{backgroundColor:s}});return(0,l.jsxs)("div",{...c,children:[(0,l.jsx)(n.RichText,{className:"pf-nominators-prefix",tagName:"p",value:a,onChange:e=>o({prefix:e}),placeholder:(0,t.__)("Nominated by: ","pressforward")}),(0,l.jsx)("p",{className:"pf-nominators",children:(()=>{if(!i)return"";const e=i.map((e=>void 0===e?null:e.name));return e.filter((e=>e)),e.join(", ")})()})]})}}),(0,e.registerPlugin)("pressforward-post-settings-control",{render:({})=>{const{editPost:e}=(0,r.useDispatch)("core/editor"),{draftPostType:n,linkToSource:a}=pfBlocks,{forwardToOrigin:i,itemLink:c,postType:d}=(0,r.useSelect)((e=>{const r=e("core/editor").getEditedPostAttribute("meta");return{forwardToOrigin:r?.pf_forward_to_origin?r.pf_forward_to_origin:[],itemLink:r?.item_link?r.item_link:"",postType:e("core/editor").getEditedPostAttribute("type")}}));if(d!==n)return null;if(!c)return null;const p=(0,l.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:c}),u=parseInt(a);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.PluginDocumentSettingPanel,{icon:"controls-forward",name:"pressforward-post-settings-control",title:(0,t.__)("PressForward","pressforward"),children:[(0,l.jsx)(s.SelectControl,{label:(0,t.__)("Forward to item's original URL?","pressforward"),description:(0,t.__)("If you want to forward this nomination to the original URL, select 'Forward'.","pressforward"),onChange:r=>{e({meta:{pf_forward_to_origin:r}})},value:i,options:[{label:(0,t.__)("Don't Forward","pressforward"),value:"no-forward"},{label:(0,t.__)("Forward","pressforward"),value:"forward"}]}),(0,l.jsxs)("p",{className:"description",children:[(0,t.__)('If set to "Forward", visitors to this item will be forwarded to the source item URL.',"pressforward"),0===u&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)("span",{children:(0,t.__)('Note that the redirect-to-source feature is currently disabled at the site level. To enable, visit Dashboard > Preferences > Site Options and increase "Seconds to redirectâ€¦" to a value greater than 0.',"pressforward")})]})]}),(0,l.jsx)(s.PanelRow,{children:p})]})})}}),(0,e.registerPlugin)("pressforward-nomination-settings-control",{render:({})=>{const{editPost:e}=(0,r.useDispatch)("core/editor"),{dateNominated:n,itemAuthor:a,itemLink:i,nominationCount:c,postStatus:d,postType:p,sourcePublicationName:u,sourcePublicationUrl:m}=(0,r.useSelect)((e=>{const r=e("core/editor").getEditedPostAttribute("meta"),t=e("core/editor").getCurrentPost(),o=t?.nominators||{},s=r?.date_nominated||"",n=r?.item_author||"",a=r?.item_link||"",i=Object.keys(o).length,l=r?.source_publication_name||"",c=r?.source_publication_url||"";return{dateNominated:s,itemAuthor:n,itemLink:a,nominationCount:i,postStatus:e("core/editor").getEditedPostAttribute("status"),postType:e("core/editor").getEditedPostAttribute("type"),sourcePublicationName:l,sourcePublicationUrl:c}})),{draftPostType:h,nominationPostType:f}=pfBlocks;if(f!==p&&h!==p)return null;const w="publish"===d,g=(0,t.sprintf)((0,t.__)("Nomination Count: %s","pressforward"),c);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.PluginDocumentSettingPanel,{icon:"controls-forward",name:"pressforward-nomination-settings-control",title:(0,t.__)("Nomination Info","pressforward"),children:[(0,l.jsx)(s.PanelRow,{children:(0,l.jsx)(s.TextControl,{label:(0,t.__)("Author on Source","pressforward"),onChange:r=>{e({meta:{item_author:r}})},value:a})}),i&&(0,l.jsx)(s.PanelRow,{children:(0,l.jsxs)("div",{className:"panel-entry",children:[(0,l.jsx)("div",{className:"panel-entry-label",children:(0,l.jsx)("span",{className:"components-base-control__label-text",children:(0,t.__)("Source Link","pressforward")})}),(0,l.jsx)("div",{className:"panel-entry-content",children:(0,l.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:i})})]})}),u&&(0,l.jsx)(s.PanelRow,{children:(0,l.jsxs)("div",{className:"panel-entry",children:[(0,l.jsx)("div",{className:"panel-entry-label",children:(0,l.jsx)("span",{className:"components-base-control__label-text",children:(0,t.__)("Source Publication","pressforward")})}),(0,l.jsx)("div",{className:"panel-entry-content",children:m?(0,l.jsx)("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:u}):u})]})}),w&&n&&(0,l.jsx)(s.PanelRow,{children:(0,l.jsxs)("div",{className:"panel-entry",children:[(0,l.jsx)("div",{className:"panel-entry-label",children:(0,l.jsx)("span",{className:"components-base-control__label-text",children:(0,t.__)("Date Nominated","pressforward")})}),(0,l.jsx)("div",{className:"panel-entry-content",children:n})]})}),w&&(0,l.jsx)(s.PanelRow,{children:g})]})})}})})();